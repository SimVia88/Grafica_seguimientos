<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gráfica de Seguimiento 3D</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body style="display: flex; justify-content: center; align-items: center; height: 100vh; background: #E1E8ED; margin: 0;">
    <div id="grafica3d" style="width: 90vw; height: 80vh;"></div>

    <script>
        function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                referencia: parseFloat(params.get("referencia")) || 0,
                criterio: params.get("criterio") || "AUM",
                datos: [
                    parseFloat(params.get("seguimiento1")) || 0,
                    parseFloat(params.get("seguimiento2")) || 0,
                    parseFloat(params.get("seguimientoAnual")) || 0
                ]
            };
        }

        const params = getQueryParams();
        const etiquetas = ["1er Semestre", "2do Semestre", "Anual"];
        const referenciaArray = etiquetas.map(() => params.referencia);

        const colores = params.datos.map(valor => {
            if (params.criterio === "AUM") {
                return valor >= params.referencia ? "#85CD7B" : "#F19595";
            } else {
                return valor >= params.referencia ? "#F19595" : "#85CD7B";
            }
        });

        const trace1 = {
            x: etiquetas,
            y: params.datos,
            z: [1, 1, 1],  // Profundidad en el eje Z
            type: "bar",
            marker: { color: colores },
            name: "Valores de Seguimiento"
        };

        const trace2 = {
            x: etiquetas,
            y: referenciaArray,
            z: [1, 1, 1],
            type: "scatter3d",
            mode: "lines",
            line: { color: "blue", width: 5 },
            name: "Valor de Referencia"
        };

        const layout = {
            title: "Gráfica de Seguimiento en 3D",
            scene: {
                xaxis: { title: "Periodo" },
                yaxis: { title: "Valor" },
                zaxis: { title: "" }
            }
        };

        Plotly.newPlot("grafica3d", [trace1, trace2], layout);
    </script>

</body>
</html>

